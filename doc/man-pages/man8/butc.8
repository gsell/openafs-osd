.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "BUTC 8"
.TH BUTC 8 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
butc \- Initializes the Tape Coordinator process
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBbutc\fR [\fB\-port\fR\ <\fIport\ offset\fR>] [\fB\-debuglevel\fR\ (0\ |\ 1\ |\ 2)]
    [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noautoquery\fR] [\fB\-localauth\fR] [\fB\-help\fR]
.PP
\&\fBbutc\fR [\fB\-p\fR\ <\fIport\ offset\fR>] [\fB\-d\fR\ (0\ |\ 1\ |\ 2)]
    [\fB\-c\fR\ <\fIcell\ name\fR>] [\fB\-n\fR] [\fB\-l\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBbutc\fR command initializes a Tape Coordinator process on a Tape
Coordinator machine, enabling an operator to direct Backup System requests
to the associated tape device or backup data file. (The Tape Coordinator
controls a backup data file if the \f(CW\*(C`FILE YES\*(C'\fR instruction appears in the
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file that corresponds to the Tape
Coordinator's entry in the \fI/usr/afs/backup/tapeconfig\fR file. For the
sake of simplicity, the following discusses tape devices only.)
.PP
It is conventional to start and run the Tape Coordinator in the
foreground. In this case, it runs on its own connection, which is
unavailable for any other use and must remain open the entire time the
Tape Coordinator is to accept backup requests and while it is executing
them. (When using a window manager, the connection corresponds to a
separate command shell window.) The Tape Coordinator can run in the
background if the \fI\s-1CFG_\s0\fIdevice_name\fI\fR file is configured to eliminate
any need for the Tape Coordinator to prompt the operator. In both the
foreground and background, the Tape Coordinator writes operation traces
and other output to the standard output stream on the connection over
which it was started. Use the \fB\-debuglevel\fR argument to control the
amount of information that appears. The Tape Coordinator also writes
traces and error messages to two files in the local \fI/usr/afs/backup\fR
directory:
.IP "\(bu" 4
The \fI\s-1TE_\s0\fIdevice_name\fI\fR file records problems that the Tape Coordinator
encounters as it executes backup operations.
.IP "\(bu" 4
The \fI\s-1TL_\s0\fIdevice_name\fI\fR file records a trace of operations as well as the
same errors written to the \fI\s-1TE_\s0\fIdevice_name\fI\fR file.
.PP
The Tape Coordinator creates the files automatically as it initializes. If
there are existing files, the Tape Coordinator renames them with a \f(CW\*(C`.old\*(C'\fR
extension, overwriting the existing \f(CW\*(C`.old\*(C'\fR files if they exist. It
derives the \fIdevice_name\fR part of the file names by stripping off the
device name's \fI/dev/\fR prefix and replacing any other slashes with
underscores. For example, the files are called \fITE_rmt_4m\fR and
\&\fITL_rmt_4m\fR for a device called \fI/dev/rmt/4m\fR.
.PP
By default, at the beginning of each operation the Tape Coordinator
prompts for the operator to insert the first tape into the drive and press
Return.  To suppress this prompt, include the \fB\-noautoquery\fR flag on the
command line or the instruction \f(CW\*(C`AUTOQUERY NO\*(C'\fR in the
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file. When the prompt is suppressed,
the first required tape must be in the drive before a \fBbackup\fR command is
issued. For subsequent tapes, the Tape Coordinator uses its normal tape
acquisition routine: if the \fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file
includes a \f(CW\*(C`MOUNT\*(C'\fR instruction, the Tape Coordinator invokes the
indicated command; otherwise, it prompts the operator for the next tape.
.PP
To stop the Tape Coordinator process, enter an interrupt signal such as
Ctrl-C over the dedicated connection (in the command shell window).
.PP
To cancel a backup operation that involves a tape before it begins
(assuming the initial tape prompt has not been suppressed), enter the
letter \f(CW\*(C`a\*(C'\fR (for \f(CW\*(C`abort\*(C'\fR) and press Return at the Tape Coordinator's
prompt for the first tape.
.PP
Tape Coordinator operation depends on the correct configuration of certain
files, as described in the following list:
.IP "\(bu" 4
The local \fI/usr/afs/backup/tapeconfig\fR file must include an entry for the
Tape Coordinator that specifies its device name and port offset number,
among other information; for details, \fItapeconfig\fR\|(5).
.IP "\(bu" 4
The port offset number recorded in the Tape Coordinator's entry in the
Backup Database must match the one in the \fItapeconfig\fR file. Create the
Backup Database entry by using the \fBbackup addhost\fR command.
.IP "\(bu" 4
The optional \fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file can contain
instructions for mounting and unmounting tapes automatically (when using a
tape stacker or jukebox, for instance) or automating other aspects of the
backup process. The \fIdevice_name\fR part of the name is derived as
described previously for the \fI\s-1TE_\s0\fIdevice_name\fI\fR and \fI\s-1TL_\s0\fIdevice_name\fI\fR
files.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
If the Tape Coordinator machine is an \s-1AIX\s0 machine, use the \s-1SMIT\s0 utility to
set the device's block size to 0 (zero), indicating variable block
size. Otherwise, tape devices attached to machines running other operating
systems sometimes cannot read tapes written on \s-1AIX\s0 machines.  For
instructions, see the \fIOpenAFS Administration Guide\fR chapter about
configuring the Backup System.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-port\fR <\fIport offset\fR>" 4
.IX Item "-port <port offset>"
Specifies the port offset number of the Tape Coordinator to initialize.
.IP "\fB\-debuglevel\fR" 4
.IX Item "-debuglevel"
Controls the amount and type of messages the Tape Coordinator displays on
the standard output stream. Provide one of three acceptable values:
.RS 4
.IP "\(bu" 4
\&\f(CW0\fR to display the minimum level of detail required to describe Tape
Coordinator operations, including prompts for tapes, messages that
indicate the beginning and end of operations, and error messages. This is
the default value.
.IP "\(bu" 4
\&\f(CW1\fR to display the names of the volumes being dumped or restored as well
as the information displayed at level \f(CW0\fR.
.IP "\(bu" 4
\&\f(CW2\fR to display all messages also being written to the
\&\fI\s-1TL_\s0\fIdevice_name\fI\fR log file.
.RE
.RS 4
.RE
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which the Tape Coordinator operates (the cell to which
the file server machines that house affected volumes belong). If this
argument is omitted, the Tape Coordinator runs in the local cell as
defined in the local \fI/usr/vice/etc/ThisCell\fR file. Do not combine this
flag with the \fB\-localauth\fR argument.
.IP "\fB\-noautoquery\fR" 4
.IX Item "-noautoquery"
Suppresses the Tape Coordinator's prompt for insertion of the first tape
needed for an operation. The operator must insert the tape into the drive
before issuing the \fBbackup\fR command that initializes the operation.
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using the server encryption key with the
highest key version number in the local \fI/usr/afs/etc/KeyFile\fR. The
\&\fBbutc\fR command interpreter presents the ticket, which never expires, to
the Volume Server and Volume Location Server to use in mutual
authentication.
.Sp
Do not combine this argument with the \fB\-cell\fR flag, and use it only when
logged on to a server machine as the local superuser \f(CW\*(C`root\*(C'\fR; client
machines do not have \fI/usr/afs/etc/KeyFile\fR file.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command starts the Tape Coordinator with port offset \f(CW7\fR at
debug level \f(CW1\fR, meaning the Tape Coordinator reports the names of
volumes it is dumping or restoring.
.PP
.Vb 1
\&   % butc \-port 7 \-debuglevel 1
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on every
machine where the Backup Server or Volume Location (\s-1VL\s0) Server is running,
and on every file server machine that houses a volume to be backed up. If
the \fB\-localauth\fR flag is included, the issuer must instead be logged on
to the Tape Coordinator machine as the local superuser \f(CW\*(C`root\*(C'\fR. In
addition, the issuer must be able to read and write to the log and
configuration files in the local \fI/usr/afs/backup\fR directory.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIKeyFile\fR\|(5),
\&\fIThisCell\fR\|(5),
\&\fIUserList\fR\|(5),
\&\fIbutc\fR\|(5),
\&\fIbutc_logs\fR\|(5),
\&\fItapeconfig\fR\|(5),
\&\fIbackup_addhost\fR\|(8)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
