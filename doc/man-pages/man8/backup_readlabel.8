.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "BACKUP_READLABEL 8"
.TH BACKUP_READLABEL 8 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
backup_readlabel \- Reads and displays a tape's label
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBbackup readlabel\fR [\fB\-portoffset\fR\ <\fI\s-1TC\s0\ port\ offset\fR>]
    [\fB\-localauth\fR] [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-help\fR]
.PP
\&\fBbackup rea\fR [\fB\-p\fR\ <\fI\s-1TC\s0\ port\ offset\fR>]
    [\fB\-l\fR] [\fB\-c\fR\ <\fIcell\ name\fR>] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBbackup readlabel\fR command displays information from the magnetic
tape label of a tape. The information includes the tape's name (either a
\&\fIpermanent name\fR, or an \fI\s-1AFS\s0 tape name\fR that reflects the tape's
contents in a prescribed format) and its capacity.
.PP
If the \f(CW\*(C`FILE YES\*(C'\fR instruction appears in the
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file associated with the specified
port offset, then the \fBbackup readlabel\fR command reads the label
information from the first 16 \s-1KB\s0 block in the backup data file listed for
that port offset in the Tape Coordinator's \fI/usr/afs/backup/tapeconfig\fR
file, rather than from the beginning of a tape.
.PP
The Tape Coordinator's default response to this command is to access the
tape by invoking the \f(CW\*(C`MOUNT\*(C'\fR instruction in the local
\&\fI/usr/afs/backup/CFG_\fIdevice_name\fI\fR file, or by prompting the backup
operator to insert the tape if there is no \f(CW\*(C`MOUNT\*(C'\fR instruction. However,
if the \f(CW\*(C`AUTOQUERY NO\*(C'\fR instruction appears in the \fI\s-1CFG_\s0\fIdevice_name\fI\fR
file, or if the issuer of the \fBbutc\fR command included the \fB\-noautoquery\fR
flag, the Tape Coordinator instead expects the tape to be in the device
already.  If it is not, the Tape Coordinator invokes the \f(CW\*(C`MOUNT\*(C'\fR
instruction or prompts the operator.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-portoffset\fR <\fI\s-1TC\s0 port offset\fR>" 4
.IX Item "-portoffset <TC port offset>"
Specifies the port offset number of the Tape Coordinator handling the
tapes for this operation.
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBbackup\fR command interpreter presents
it to the Backup Server, Volume Server and \s-1VL\s0 Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument. For
more details, see \fIbackup\fR\|(8).
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIbackup\fR\|(8).
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
Output from this command appears in both the shell window where the
command is issued, and in the Tape Coordinator window.
.PP
If the tape is unlabeled or if the specified tape device is empty, the
output reads
.PP
.Vb 1
\&   Failed to read tape label.
.Ve
.PP
Otherwise, the output in the shell window has the following format:
.PP
.Vb 2
\&   Tape read was labelled: <tape name> (<dump id>)
\&        size: <size> Kbytes
.Ve
.PP
where <tape name> is the permanent name if the tape has one, or the \s-1AFS\s0
tape name otherwise. The <dump \s-1ID\s0> is dump \s-1ID\s0 of the initial dump on the
tape, and <size> is the recorded capacity of the tape in kilobytes.
.PP
The output in the Tape Coordinator windows is bounded by an underlined
\&\f(CW\*(C`Tape label\*(C'\fR header at the top, and the following string at the bottom:
.PP
.Vb 1
\&   \-\- End of tape label \-\-
.Ve
.PP
In between are lines reporting the following information:
.IP "tape name" 4
.IX Item "tape name"
The permanent name assigned by using the \-pname argument of the \fBbackup
labeltape\fR command. This name remains on the tape until that argument is
used again, no matter how many times the tape is recycled or otherwise
relabeled. If the tape does not have a permanent name, the value \f(CW\*(C`<NULL>\*(C'\fR appears in this field.
.IP "\s-1AFS\s0 tape name" 4
.IX Item "AFS tape name"
A tape name in one of the following prescribed formats. The Backup System
automatically writes the appropriate \s-1AFS\s0 tape name to the label as part of
a \fBbackup dump\fR or \fBbackup savedb\fR operation, or the operator can assign
it with the \fB\-name\fR argument to the \fBbackup labeltape\fR command.
.RS 4
.IP "\(bu" 4
\&\fIvolume_set_name\fR\fB.\fR\fIdump_level_name\fR.\fItape_index\fR, if the tape
contains volume data. The \fIvolume_set_name\fR is the name of the volume set
that was dumped to create the initial dump in the dump set of to which
this tape belongs; \fIdump_level_name\fR is the last pathname element of the
dump level at which the initial dump was backed up; and \fItape_index\fR is
the numerical position of the tape in the dump set.
.IP "\(bu" 4
\&\f(CW\*(C`Ubik.db.dump.\*(C'\fR\fItape_index\fR if the tape contains a dump of the Backup
Database, created with the \fBbackup savedb\fR command. The \fItape_index\fR is
the ordinal of the tape in the dump set.
.IP "\(bu" 4
\&\f(CW\*(C`<NULL>\*(C'\fR if the tape has no \s-1AFS\s0 tape name. This is normally the case
if the \fB\-name\fR argument was not included the last time the \fBbackup
labeltape\fR command was used on this tape, and no data has been written to
it since.
.RE
.RS 4
.RE
.IP "creationTime" 4
.IX Item "creationTime"
The date and time at which the Backup System started performing the dump
operation that created the initial dump.
.IP "cell" 4
.IX Item "cell"
The cell in which the dump set was created. This is the cell whose Backup
Database contains a record of the dump set.
.IP "size" 4
.IX Item "size"
The tape's capacity (in kilobytes) as recorded on the label, rather than
the amount of data on the tape. The value is assigned by the \fB\-size\fR
argument to the \fBbackup labeltape\fR command or derived from the
\&\fI/usr/afs/backup/tapeconfig\fR file on the Tape Coordinator machine, not
from a measurement of the tape.
.IP "dump path" 4
.IX Item "dump path"
The dump level of the initial dump in the dump set.
.IP "dump id" 4
.IX Item "dump id"
The dump \s-1ID\s0 number of the initial dump in the dump set, as recorded in the
Backup Database.
.IP "useCount" 4
.IX Item "useCount"
The number of times a dump has been written to the tape, or it has been
relabeled.
.PP
The message \f(CW\*(C`ReadLabel: Finished\*(C'\fR indicates the completion of the output.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example shows the output for the tape with permanent name
\&\f(CW\*(C`oct.guest.dump\*(C'\fR and capacity 2 \s-1MB\s0, expressed in kilobyte units (2097152
equals 2 times 10242).
.PP
.Vb 3
\&   % backup readlabel \-portoffset 6
\&   Tape read was labelled: oct.guest.dump (907215000)
\&        size: 2097152 Kbytes
.Ve
.PP
The output in the Tape Coordinator window reads:
.PP
.Vb 11
\&   Tape label
\&   \-\-\-\-\-\-\-\-\-\-
\&   tape name = oct.guest.dump
\&   AFS tape name = guests.monthly.3
\&   creationTime = Thu Oct 1 00:10:00 1998
\&   cell = abc.com
\&   size = 2097152 Kbytes
\&   dump path = /monthly
\&   dump id = 907215000
\&   useCount = 5
\&   \-\-\-\- End of tape label \-\-\-\-
.Ve
.PP
The following example is for a tape that does not have a permanent tape.
.PP
.Vb 3
\&   % backup readlabel \-portoffset 6
\&   Tape read was labelled: guests.monthly.2 (909899900)
\&        size: 2097152 Kbytes
.Ve
.PP
The output in the Tape Coordinator window reads:
.PP
.Vb 11
\&   Tape label
\&   \-\-\-\-\-\-\-\-\-\-
\&   tape name = <NULL>
\&   AFS tape name = guests.monthly.2
\&   creationTime = Sun Nov 1 00:58:20 1998
\&   cell = abc.com
\&   size = 2097152 Kbytes
\&   dump path = /monthly
\&   dump id = 909899900
\&   useCount = 1
\&   \-\-\-\- End of tape label \-\-\-\-
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on every
machine where the Backup Server is running, or must be logged onto a
server machine as the local superuser \f(CW\*(C`root\*(C'\fR if the \fB\-localauth\fR flag is
included.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbutc\fR\|(5),
\&\fIbackup\fR\|(8),
\&\fIbackup_labeltape\fR\|(8),
\&\fIbutc\fR\|(8)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
