.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "TAPECONFIG 5"
.TH TAPECONFIG 5 "2010-12-15" "OpenAFS" "AFS File Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
tapeconfig \- Defines parameters for tape devices and backup data files
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fItapeconfig\fR file defines basic configuration parameters for all of
the tape devices or backup data files available for backup operations on a
Tape Coordinator machine. The file is in \s-1ASCII\s0 format and must reside in
the local \fI/usr/afs/backup\fR directory. The instruction for each tape
device or backup data file appears on its own line and each has the
following format:
.PP
.Vb 1
\&   [<capacity> <filemark_size>] <device_name> <port_offset>
.Ve
.PP
where
.IP "<capacity>" 4
.IX Item "<capacity>"
Specifies the capacity of the tapes used with a tape device, or the amount
of data to write into a backup data file. The Tape Coordinator refers to
this value in two circumstances:
.RS 4
.IP "\(bu" 4
When the capacity field of a tape or backup data file's label is empty
(because the tape has never been labeled). The Tape Coordinator records
this value on the label and uses it when determining how much data it can
write to the tape or file during a \fBbackup dump\fR or \fBbackup savedb\fR
operation. If there is already a capacity value on the label, the Tape
Coordinator uses it instead.
.IP "\(bu" 4
When the \fB\-size\fR argument is omitted the first time the \fBbackup
labeltape\fR command is used on a given tape or file.  The Tape Coordinator
copies this value into the label's capacity field.
.RE
.RS 4
.Sp
The Tape Coordinator uses this capacity value or the one on the Backup
System tape label to track how much space remains as it writes data to a
tape or backup data file. The appropriate value to record for a tape
depends on the size of the tapes usually used in the device and whether it
has a compression mode; for suggested values, see the \fIOpenAFS
Administration Guide\fR chapter on configuring the Backup System. If using a
value obtained from the \fBfms\fR command, reduce it by 10% to 15% before
recording it in the file.
.Sp
For a backup data file, it is best to provide a value that helps the Tape
Coordinator avoid reaching the end-of-file (\s-1EOF\s0) unexpectedly. Make it at
least somewhat smaller than the amount of space available on the partition
housing the file when the dump operation begins, and never larger than the
maximum file size allowed by the operating system.
.Sp
Specify a (positive) integer or decimal value followed by a letter than
indicates units, with no intervening space. In a decimal number, the
number of digits after the decimal point must not translate to fractions
of bytes. The maximum acceptable value is 2048 \s-1GB\s0 (2 \s-1TB\s0). The acceptable
units letters are as follows; if the letter is omitted, the default is
kilobytes.
.IP "\(bu" 4
\&\f(CW\*(C`k\*(C'\fR or \f(CW\*(C`K\*(C'\fR for kilobytes (\s-1KB\s0).
.IP "\(bu" 4
\&\f(CW\*(C`m\*(C'\fR or \f(CW\*(C`M\*(C'\fR for megabytes (\s-1MB\s0).
.IP "\(bu" 4
\&\f(CW\*(C`g\*(C'\fR or \f(CW\*(C`G\*(C'\fR for gigabytes (\s-1GB\s0).
.IP "\(bu" 4
\&\f(CW\*(C`t\*(C'\fR or \f(CW\*(C`T\*(C'\fR for terabytes (\s-1TB\s0).
.RE
.RS 4
.Sp
If this field is omitted, the Tape Coordinator uses the maximum acceptable
value (2048 \s-1GB\s0 or 2 \s-1TB\s0). Either leave both this field and the
<filemark_size> field empty, or provide a value in both of them.
.RE
.IP "<filemark_size>" 4
.IX Item "<filemark_size>"
Specifies the size of a tape device's filemarks (also called end-of-file
or \s-1EOF\s0 marks), which is set by the device's manufacturer. In a dump to
tape, the Tape Coordinator inserts filemarks at the boundary between the
data from each volume, so the filemark size affects how much space is
available for actual data.
.Sp
The appropriate value to record for a tape depends on the size of the
tapes usually used in the device and whether it has a compression mode;
for suggested values, see the \fIOpenAFS Administration Guide\fR chapter on
configuring the Backup System. If using a value obtained from the \fBfms\fR
command, increase it by 10% to 15% before recording it in the file.
.Sp
For backup data files, record a value of 0 (zero). The Tape Coordinator
actually ignores this field for backup data files, because it does not use
filemarks when writing to a file.
.Sp
Use the same notation as for the <capacity> field, but note that the
default units is bytes rather than kilobytes. The maximum acceptable value
is 2048 \s-1GB\s0.
.Sp
If this field is empty, the Tape Coordinator uses the value 0
(zero). Either leave both this field and the <capacity> field empty, or
provide a value in both of them.
.IP "<device_name>" 4
.IX Item "<device_name>"
Specifies the complete pathname of the tape device or backup data
file. The format of tape device names depends on the operating system, but
on \s-1UNIX\s0 systems device names generally begin with the string \fI/dev/\fR. For
a backup data file, this field defines the complete pathname; for a
discussion of suggested naming conventions see the description of the
\&\f(CW\*(C`FILE\*(C'\fR instruction in \fIbutc\fR\|(5).
.IP "<port_offset>" 4
.IX Item "<port_offset>"
Specifies the port offset number associated with this combination of Tape
Coordinator and tape device or backup data file.
.Sp
Acceptable values are the integers \f(CW0\fR through \f(CW58510\fR (the Backup
System can track a maximum of 58,511 port offset numbers).  Each value
must be unique among the cell's Tape Coordinators, but any number of them
can be associated with a single machine. Port offset numbers need not be
assigned sequentially, and can appear in any order in the \fItapeconfig\fR
file. Assign port offset \f(CW0\fR to the Tape Coordinator for the tape device
or backup data file used most often for backup operations; doing so will
allow the operator to omit the \fB\-portoffset\fR argument from the largest
possible number of \fBbackup\fR commands.
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
Creating the file requires \s-1UNIX\s0 \f(CW\*(C`w\*(C'\fR (write) and \f(CW\*(C`x\*(C'\fR (execute)
permissions on the \fI/usr/afs/backup\fR directory. Editing the file requires
\&\s-1UNIX\s0 \f(CW\*(C`w\*(C'\fR (write) permission on the file.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example tapeconfig file configures three tape devices and a
backup data file. The first device has device name \fI/dev/rmt/0h\fR, and is
assigned port offset \f(CW0\fR because it will be the most frequently used
device for all backup operations in the cell. Its default tape capacity is
2 \s-1GB\s0 and filemark size is 1 \s-1MB\s0. The \fI/dev/rmt/3h\fR drive has half the
capacity but a much smaller filemark size; its port offset is \f(CW3\fR. The
third device listed, \fI/dev/rmt/4h\fR, has the same capacity and filemark
size as the first device and is assigned port offset \f(CW2\fR. Port offset
\&\f(CW4\fR is assigned to the backup data file \fI/dev/FILE\fR, which is actually a
symbolic link to the actual file located elsewhere on the local disk. The
Tape Coordinator writes up to 1.5 \s-1GB\s0 into the file; as recommended, the
filemark size is set to zero.
.PP
.Vb 4
\&   2G 1M /dev/rmt/0h 0
\&   1g 4k /dev/rmt/3h 3
\&   2G 1m /dev/rmt/4h 2
\&   1.5G 0 /dev/FILE 4
.Ve
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIbackup_addhost\fR\|(8),
\&\fIbackup_dump\fR\|(8),
\&\fIbackup_labeltape\fR\|(8),
\&\fIbackup_savedb\fR\|(8),
\&\fIbutc\fR\|(8),
\&\fIfms\fR\|(8)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
