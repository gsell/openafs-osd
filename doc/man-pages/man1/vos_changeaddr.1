.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_CHANGEADDR 1"
.TH VOS_CHANGEADDR 1 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_changeaddr \- Changes or removes a file server machine's entry in the VLDB
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos changeaddr\fR \fB\-oldaddr\fR\ <\fIoriginal\ \s-1IP\s0\ address\fR>
    [\fB\-newaddr\fR\ <\fInew\ \s-1IP\s0\ address\fR>] [\fB\-remove\fR]
    [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noauth\fR] [\fB\-localauth\fR]
    [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-noresolve\fR] [\fB\-help\fR]
.PP
\&\fBvos changea\fR \fB\-o\fR\ <\fIoriginal\ \s-1IP\s0\ address\fR>
    [\fB\-ne\fR\ <\fInew\ \s-1IP\s0\ address\fR>] [\fB\-r\fR]
    [\fB\-c\fR\ <\fIcell\ name\fR>]
    [\fB\-noa\fR] [\fB\-l\fR] [\fB\-v\fR] [\fB\-e\fR] [\fB\-nor\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos changeaddr\fR command removes a server entry from the Volume
Location Database (\s-1VLDB\s0) when the \fB\-remove\fR flag is combined with the
\&\fB\-oldaddr\fR argument. There must be no \s-1VLDB\s0 entries that list the machine
as a site for any version of a volume (if necessary, use the \fBvos move\fR
or \fBvos remove\fR command to more or remove volumes). It is appropriate to
remove a \s-1VLDB\s0 server entry when removing the corresponding file server
machine from service; this is the only recommended use of the command.
.PP
To display all \s-1VLDB\s0 server entries, use the \fBvos listaddrs\fR command.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Combining the command's \fB\-oldaddr\fR and \fB\-newaddr\fR arguments is no longer
the appropriate way to change the \s-1IP\s0 address registered for a file server
machine. Furthermore, if a machine is multihomed and its server entry
includes several addresses, then the address specified with the
\&\fB\-newaddr\fR argument replaces all of the addresses currently listed in the
server entry that includes the address specified by the \fB\-oldaddr\fR
argument. This effectively makes the machine single-homed with respect to
\&\s-1AFS\s0 operations, which is probably not the desired result.
.PP
The recommended method for changing the \s-1IP\s0 addresses in a server entry is
instead to restart the \f(CW\*(C`fs\*(C'\fR process group (which includes the File
Server) after using the utilities provided by the operating system to
reconfigure the machine's network interfaces. For a description of how the
File Server constructs and registers a list of its network interfaces in
the \s-1VLDB\s0, see \fIsysid\fR\|(5).
.PP
If, counter to recommended usage, the command is used to change the \s-1IP\s0
address in a server entry, it does not also change the names of machine
entries in the Protection Database. Operations fail when they refer to a
protection group that has an obsolete \s-1IP\s0 address in it. Use the \fBpts
rename\fR command to change the names of machine entries that correspond to
the addresses changed with this command. Changing the address of a
database server machine also requires updating the client and server
versions of the \fICellServDB\fR file on every machine.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-oldaddr\fR <\fIoriginal \s-1IP\s0 address\fR>" 4
.IX Item "-oldaddr <original IP address>"
Specifies the \s-1IP\s0 address currently registered for the file server machine
in the \s-1VLDB\s0 server entry. If there are multiple addresses registered for a
multihomed machine, use any of them to identify the server entry.
.IP "\fB\-newaddr\fR <\fInew \s-1IP\s0 address\fR>" 4
.IX Item "-newaddr <new IP address>"
Specifies the new \s-1IP\s0 address that replaces all currently registered
addresses.
.IP "\fB\-remove\fR" 4
.IX Item "-remove"
Removes from the \s-1VLDB\s0 the server entry that includes the address specified
by the \fB\-oldaddr\fR argument.
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity \f(CW\*(C`anonymous\*(C'\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
\&\fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the command so that the operation's results are not transmitted
across the network in clear text. This option is available in OpenAFS
versions 1.4.11 or later and 1.5.60 or later.
.IP "\fB\-noresolve\fR" 4
.IX Item "-noresolve"
Shows all servers as \s-1IP\s0 addresses instead of the \s-1DNS\s0 name. This is very
useful when the server address is registered as 127.0.0.1 or when dealing
with multi-homed servers. This option is available in OpenAFS
versions 1.4.8 or later and 1.5.35 or later.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command removes the \s-1VLDB\s0 server entry that includes the \s-1IP\s0
address \f(CW192.12.107.214\fR.
.PP
.Vb 1
\&   % vos changeaddr \-oldaddr 192.12.107.214 \-remove
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
Issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the machine
specified with the \fB\-oldaddr\fR argument and on each database server
machine.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fICellServDB\fR\|(5),
\&\fIUserList\fR\|(5),
\&\fIsysid\fR\|(5),
\&\fIfileserver\fR\|(8),
\&\fIpts_rename\fR\|(1),
\&\fIvos\fR\|(1),
\&\fIvos_listaddrs\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
