.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "FS_COPYACL 1"
.TH FS_COPYACL 1 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
fs_copyacl \- Copies an ACL from a directory to one or more other directories
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBfs copyacl\fR \fB\-fromdir\fR\ <\fIsource\ directory\ (or\ \s-1DFS\s0\ file)\fR>
    \fB\-todir\fR\ <\fIdestination\ directory\ (or\ \s-1DFS\s0\ file)\fR>+
    [\fB\-clear\fR] [\fB\-id\fR] [\fB\-if\fR] [\-help]
.PP
\&\fBfs co\fR \fB\-f\fR\ <\fIsource\ directory\ (or\ \s-1DFS\s0\ file)\fR>
    \fB\-t\fR\ <\fIdestination\ directory\ (or\ \s-1DFS\s0\ file)\fR>+
    [\fB\-c\fR] [\fB\-id\fR] [\fB\-if\fR] [\-h]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The fs copyacl command copies the access control list (\s-1ACL\s0) from a source
directory to each specified destination directory. The source directory's
\&\s-1ACL\s0 is unchanged, and changes to the destination directory's \s-1ACL\s0 obey the
following rules:
.IP "\(bu" 4
If an entry on the source \s-1ACL\s0 does not already exist on the destination
\&\s-1ACL\s0, it is added.
.IP "\(bu" 4
If an entry exists on both the source and destination ACLs, the
permissions from the source \s-1ACL\s0 entry replace the current permissions on
the destination \s-1ACL\s0 entry.
.IP "\(bu" 4
If an entry on the destination \s-1ACL\s0 has no corresponding entry on the
source \s-1ACL\s0, it is removed if the \fB\-clear\fR flag is included and is
unchanged otherwise. In other words, if the \fB\-clear\fR flag is provided,
the source \s-1ACL\s0 completely replaces the destination \s-1ACL\s0.
.PP
When using this command to copy ACLs between objects in \s-1DFS\s0 filespace
accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol Translator, it is
possible to specify files, as well as directories, with the \fB\-fromdir\fR
and \fB\-todir\fR arguments.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Do not copy ACLs between \s-1AFS\s0 and \s-1DFS\s0 files or directories. The \s-1ACL\s0 formats
are incompatible.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-fromdir\fR <\fIsource directory\fR>" 4
.IX Item "-fromdir <source directory>"
Specifies the source directory from which to copy the \s-1ACL\s0.  (Specifying an
\&\s-1AFS\s0 file copies its directory's \s-1ACL\s0, but specifying a \s-1DFS\s0 file copies its
own \s-1ACL\s0.) A partial pathname is interpreted relative to the current
working directory.
.IP "\fB\-todir\fR <\fIdestination directory\fR>" 4
.IX Item "-todir <destination directory>"
Specifies each directory for which to alter the \s-1ACL\s0 to match the source
\&\s-1ACL\s0. (Specifying an \s-1AFS\s0 file halts the command with an error, but
specifying a \s-1DFS\s0 file alters the file's \s-1ACL\s0). A partial pathname is
interpreted relative to the current working directory.
.Sp
Specify the read/write path to each directory (or \s-1DFS\s0 file), to avoid the
failure that results from attempting to change a read-only volume. By
convention, the read/write path is indicated by placing a period before
the cell name at the pathname's second level (for example,
\&\f(CW\*(C`/afs/.abc.com\*(C'\fR). For further discussion of the concept of read/write and
read-only paths through the filespace, see the \fBfs mkmount\fR reference
page.
.IP "\fB\-clear\fR" 4
.IX Item "-clear"
Replaces the \s-1ACL\s0 of each destination directory with the source \s-1ACL\s0.
.IP "\fB\-id\fR" 4
.IX Item "-id"
Modifies the Initial Container \s-1ACL\s0 of each \s-1DFS\s0 directory named by the
\&\fB\-todir\fR argument, rather than the regular Object \s-1ACL\s0. This argument is
supported only when both the source and each destination directory reside
in \s-1DFS\s0 and are accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol
Translator.
.IP "\fB\-if\fR" 4
.IX Item "-if"
Modifies the Initial Object \s-1ACL\s0 of each \s-1DFS\s0 directory named by the
\&\fB\-todir\fR argument, rather than the regular Object \s-1ACL\s0. This argument is
supported only when both the source and each destination directory reside
in \s-1DFS\s0 and are accessed via the \s-1AFS/DFS\s0 Migration Toolkit Protocol
Translator.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example command copies the current working directory's \s-1ACL\s0
to its subdirectory called \fIreports\fR. Note that the source directory's
\&\s-1ACL\s0 is unaffected. Entries on the \fIreports\fR directory's that are not on
the source \s-1ACL\s0 of the current directory remain unaffected as well, because
the \fB\-clear\fR flag is not used.
.PP
.Vb 11
\&   % fs listacl . reports
\&   Access list for . is
\&   Normal rights:
\&      pat rlidwka
\&      smith rlidwk
\&   Access list for reports is
\&   Normal rights:
\&      pat rl
\&      pat:friends rl
\&   Negative rights
\&      jones rlidwka
\&
\&   % fs copyacl \-fromdir . \-todir reports
\&
\&   % fs listacl . reports
\&   Access list for . is
\&   Normal rights:
\&      pat rlidwka
\&      smith rlidwk
\&   Access list for reports is
\&   Normal rights:
\&      pat rlidwka
\&      pat:friends rl
\&      smith rlidwk
\&   Negative rights
\&      jones rlidwka
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
To copy an \s-1ACL\s0 between \s-1AFS\s0 objects, the issuer must have the \f(CW\*(C`l\*(C'\fR (lookup)
permission on the source directory's \s-1ACL\s0 and the \f(CW\*(C`a\*(C'\fR (administer)
permission on each destination directory's \s-1ACL\s0. If the \fB\-fromdir\fR
argument names a file rather than a directory, the issuer must have both
the \f(CW\*(C`l\*(C'\fR and \f(CW\*(C`r\*(C'\fR (read) permissions on the \s-1ACL\s0 of the file's directory.
.PP
To copy an \s-1ACL\s0 between \s-1DFS\s0 objects, the issuer must have the r permission
on the source directory or file's \s-1ACL\s0 and the \f(CW\*(C`c\*(C'\fR (control) permission on
each destination directory or file's \s-1ACL\s0.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIfs_listacl\fR\|(1),
\&\fIfs_mkmount\fR\|(1),
\&\fIfs_setacl\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
