.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_DUMP 1"
.TH VOS_DUMP 1 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_dump \- Converts a volume into ASCII format and writes it to a file
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos dump\fR \fB\-id\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
    [\fB\-time\fR\ <\fIdump\ from\ time\fR>]
    [\fB\-file\fR\ <\fIdump\ file\fR>] [\fB\-server\fR\ <\fIserver\fR>]
    [\fB\-partition\fR\ <\fIpartition\fR>] [\fB\-clone\fR] [\fB\-omitdirs\fR]
    [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noauth\fR] [\fB\-localauth\fR]
    [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-noresolve\fR] [\fB\-help\fR]
.PP
\&\fBvos du\fR \fB\-i\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
    [\fB\-t\fR\ <\fIdump\ from\ time\fR>]
    [\fB\-f\fR\ <\fIdump\ file\fR>] [\fB\-s\fR\ <\fIserver\fR>]
    [\fB\-p\fR\ <\fIpartition\fR>]
    [\fB\-cl\fR] [\fB\-o\fR] [\fB\-ce\fR\ <\fIcell\ name\fR>] [\fB\-noa\fR] [\fB\-l\fR]
    [\fB\-v\fR] [\fB\-e\fR] [\fB\-nor\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos dump\fR command converts the contents of the indicated volume,
which can be read/write, read-only or backup, into \s-1ASCII\s0 format. The
Volume Server writes the converted contents to the file named by the
\&\fB\-file\fR argument, or to the standard output stream. In the latter case,
the output can be directed to a named pipe, which enables interoperation
with third-party backup utilities.
.PP
To dump the complete contents of a volume (create a \fIfull dump\fR), omit
the \fB\-time\fR argument or specify the value \f(CW0\fR (zero) for it. To create
an \fIincremental dump\fR, which includes only the files and directories in
the volume that have modification timestamps later than a certain time,
specify a date and time as the value for the \fB\-time\fR argument.
.PP
By default, the vos command interpreter consults the Volume Location
Database (\s-1VLDB\s0) to learn the volume's location, so the \fB\-server\fR and
\&\fB\-partition\fR arguments are not required. If the \fB\-id\fR argument
identifies a read-only volume that resides at multiple sites, the command
dumps the version from just one of them (normally, the one listed first in
the volume's \s-1VLDB\s0 entry as reported by the \fBvos examine\fR or \fBvos
listvldb\fR command). To dump the read-only volume from a particular site,
use the \fB\-server\fR and \fB\-partition\fR arguments to specify the site. To
bypass the \s-1VLDB\s0 lookup entirely, provide a volume \s-1ID\s0 number (rather than a
volume name) as the value for the \fB\-id\fR argument, together with the
\&\fB\-server\fR and \fB\-partition\fR arguments. This makes it possible to dump a
volume for which there is no \s-1VLDB\s0 entry.
.PP
During the dump operation, the volume is inaccessible both to Cache
Managers and to other volume operations. Dumping a volume does not
otherwise affect its status on the partition or its \s-1VLDB\s0 entry.
.PP
To restore a dumped volume back into \s-1AFS\s0, use the \fBvos restore\fR command.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Support for incremental dumps is provided to facilitate interoperation
with third-party backup utilities. The \fBvos dump\fR command does not
provide any of the administrative facilities of an actual backup system,
so the administrator must keep manual records of dump times and the
relationship between full and incremental dumps of a volume. For a
volume's contents to be consistent after restoration of incremental dumps,
there must be no gap between the time at which a prior dump of the volume
was created and the value of the \fB\-time\fR argument to the \fBvos dump\fR
command that creates the incremental dump. More specifically, for a
read/write volume, the \fB\-time\fR argument must specify the time that the
prior dump was performed, and for a read-only or backup volume it must
specify the time that the volume was last released (using the \fBvos
release\fR command) or cloned (using the \fBvos backup\fR or \fBvos backupsys\fR
command) prior to dumping it. The parent dump can be either a full dump or
another incremental dump.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
.IX Item "-id <volume name or ID>"
Specifies either the complete name or volume \s-1ID\s0 number of the read/write,
read-only, or backup volume to dump.
.IP "\fB\-time\fR <\fIdump from time\fR>" 4
.IX Item "-time <dump from time>"
Specifies whether the dump is full or incremental. Omit this argument to
create a full dump, or provide one of three acceptable values:
.RS 4
.IP "\(bu" 4
The value \f(CW0\fR (zero) to create a full dump.
.IP "\(bu" 4
A date in the format \fImm\fR\fB/\fR\fIdd\fR\fB/\fR\fIyyyy\fR (month, day and year) to
create an incremental dump that includes only files and directories with
modification timestamps later than midnight (12:00 a.m.) on the indicated
date. Valid values for the year range from \f(CW1970\fR to \f(CW2037\fR; higher
values are not valid because the latest possible date in the standard \s-1UNIX\s0
representation is in 2038. The command interpreter automatically reduces
later dates to the maximum value. An example is \f(CW\*(C`01/13/1999\*(C'\fR.
.IP "\(bu" 4
A date and time in the format \fB"\fR\fImm\fR\fB/\fR\fIdd\fR\fB/\fR\fIyyyy\fR
\&\fIhh\fR\fB:\fR\fI\s-1MM\s0\fR\fB"\fR to create an incremental dump that includes only files
and directories with modification timestamps later than the specified date
and time. The date format is the same as for a date alone. Express the
time as hours and minutes (\fIhh\fR:\fI\s-1MM\s0\fR) in 24\-hour format (for example,
\&\fB20:30\fR is 8:30 p.m.). Surround the entire expression with double quotes
(\f(CW""\fR) because it contains a space.  An example is \f(CW"01/13/1999 22:30"\fR.
.RE
.RS 4
.RE
.IP "\fB\-file\fR <\fIdump file\fR>" 4
.IX Item "-file <dump file>"
Specifies the pathname of the file to which to write the dump. The file
can be in \s-1AFS\s0, but not in the volume being dumped. A partial pathname is
interpreted relative to the current working directory. If this argument is
omitted, the dump is directed to the standard output stream.
.IP "\fB\-server\fR <\fIserver name\fR>" 4
.IX Item "-server <server name>"
Specifies the file server machine on which the volume resides.  Provide
the \fB\-partition\fR argument along with this one.
.IP "\fB\-partition\fR <\fIpartition name\fR>" 4
.IX Item "-partition <partition name>"
Specifies the partition on which the volume resides. Provide the
\&\fB\-server\fR argument along with this one.
.IP "\fB\-clone\fR" 4
.IX Item "-clone"
Normally, \fBvos dump\fR locks the volume and dumps it, which blocks writes
to the volume while the dump is in progress.  If this flag is given, \fBvos
dump\fR will instead clone the volume first (similar to what \fBvos move\fR
would do) and then dumps the clone.  This can significantly decrease the
amount of time the volume is kept locked for dumps of large volumes.
.IP "\fB\-omitdirs\fR" 4
.IX Item "-omitdirs"
By default, \fBvos dump\fR includes all directory objects in an incremental
dump whether they've been changed or not.  If this option is given,
unchanged directories will be omitted.  This will reduce the size of the
dump and not cause problems if the incremental is restored, as expected,
on top of a volume containing the correct directory structure (such as one
created by restoring previous full and incremental dumps).
.IP "\fB\-cell\fR <\fIcell name\fR" 4
.IX Item "-cell <cell name"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity anonymous to the issuer. Do not combine
this flag with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard error stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the command so that the operation's results are not transmitted
across the network in clear text. This option is available in OpenAFS
versions 1.4.11 or later and 1.5.60 or later.
.IP "\fB\-noresolve\fR" 4
.IX Item "-noresolve"
Shows all servers as \s-1IP\s0 addresses instead of the \s-1DNS\s0 name. This is very
useful when the server address is registered as 127.0.0.1 or when dealing
with multi-homed servers. This option is available in OpenAFS
versions 1.4.8 or later and 1.5.35 or later.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command writes a full dump of the volume \f(CW\*(C`user.terry\*(C'\fR to
the file \fI/afs/abc.com/common/dumps/terry.dump\fR.
.PP
.Vb 1
\&   % vos dump \-id user.terry \-time 0 \-file /afs/abc.com/common/dumps/terry.dump
.Ve
.PP
The following command writes an incremental dump of the volume
\&\f(CW\*(C`user.smith\*(C'\fR to the file \f(CW\*(C`smith.990131.dump\*(C'\fR in the current working
directory. Only those files in the volume with modification time stamps
later than 6:00 p.m. on 31 January 1999 are included in the dump.
.PP
.Vb 1
\&   % vos dump \-id user.smith \-time "01/31/1999 18:00" \-file smith.990131.dump
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the
machine specified with the \fB\-server\fR argument and on each database server
machine. If the \fB\-localauth\fR flag is included, the issuer must instead be
logged on to a server machine as the local superuser \f(CW\*(C`root\*(C'\fR.
.PP
If the \fB\-file\fR argument is included, the issuer must also have permission
to insert and write in the directory that houses the file.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIrestorevol\fR\|(1),
\&\fIvos\fR\|(1),
\&\fIvos_examine\fR\|(1),
\&\fIvos_listvldb\fR\|(1),
\&\fIvos_restore\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
