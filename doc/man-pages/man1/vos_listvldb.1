.\" Automatically generated by Pod::Man 2.23 (Pod::Simple 3.14)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_LISTVLDB 1"
.TH VOS_LISTVLDB 1 "2011-09-06" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_listvldb \- Displays a volume's VLDB entry
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos listvldb\fR [\fB\-name\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>]
    [\fB\-server\fR\ <\fImachine\ name\fR>]
    [\fB\-partition\fR\ <\fIpartition\ name\fR>]
    [\fB\-locked\fR] [\fB\-quiet\fR] [\fB\-nosort\fR]
    [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noauth\fR] [\fB\-localauth\fR]
    [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-noresolve\fR] [\fB\-help\fR]
.PP
\&\fBvos listvl\fR [\fB\-na\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>]
    [\fB\-s\fR\ <\fImachine\ name\fR>]
    [\fB\-p\fR\ <\fIpartition\ name\fR>]
    [\fB\-lock\fR] [\fB\-q\fR] [\fB\-nos\fR] [\fB\-c\fR\ <\fIcell\ name\fR>]
    [\fB\-noa\fR] [\fB\-loca\fR] [\fB\-v\fR] [\fB\-e\fR] [\fB\-nor\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos listvldb\fR command formats and displays information from the
Volume Location Database (\s-1VLDB\s0) entry for each volume specified.  The
output depends on the combination of options supplied on the command
line. Combine options as indicated to display the desired type of \s-1VLDB\s0
entries:
.IP "\(bu" 4
Every entry in the \s-1VLDB:\s0 provide no options.
.IP "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain file server machine as the site
for a volume: specify the machine's name as the \fB\-server\fR argument.
.IP "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain partition on any file server
machine as the site for a volume: specify the partition name as the
\&\fB\-partition\fR argument.
.IP "\(bu" 4
Every \s-1VLDB\s0 entry that mentions a certain partition on a certain file
server machine as the site for a volume: combine the \fB\-server\fR and
\&\fB\-partition\fR arguments.
.IP "\(bu" 4
A single \s-1VLDB\s0 entry: specify a volume name or \s-1ID\s0 number with the \fB\-name\fR
argument.
.IP "\(bu" 4
The \s-1VLDB\s0 entry only for the volumes with locked \s-1VLDB\s0 entries found at a
certain site: combine the \fB\-locked\fR flag with any of arguments that
define sites.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-name\fR <\fIvolume name or \s-1ID\s0\fR>" 4
.IX Item "-name <volume name or ID>"
Specifies either the complete name or volume \s-1ID\s0 number of a volume of any
of the three types.
.IP "\fB\-server\fR <\fIserver name\fR>" 4
.IX Item "-server <server name>"
Identifies the file server machine listed as a site in each \s-1VLDB\s0 entry to
display. Provide the machine's \s-1IP\s0 address or its host name (either fully
qualified or using an unambiguous abbreviation). For details, see
\&\fIvos\fR\|(1).
.Sp
This argument can be combined with the \fB\-partition\fR argument, the
\&\fB\-locked\fR flag, or both.
.IP "\fB\-partition\fR <\fIpartition name\fR>" 4
.IX Item "-partition <partition name>"
Identifies the partition (on the file server machine specified by the
\&\fB\-server\fR argument) listed as a site in each \s-1VLDB\s0 entry to
display. Provide the partition's complete name with preceding slash (for
example, \f(CW\*(C`/vicepa\*(C'\fR) or use one of the three acceptable abbreviated
forms. For details, see \fIvos\fR\|(1).
.Sp
This argument can be combined with the \fB\-server\fR argument, the \fB\-locked\fR
flag, or both.
.IP "\fB\-locked\fR" 4
.IX Item "-locked"
Displays only locked \s-1VLDB\s0 entries. This flag can be combined with the
\&\fB\-server\fR argument, the \fB\-partition\fR argument, or both.
.IP "\fB\-quiet\fR" 4
.IX Item "-quiet"
Suppresses the lines that summarize the number of volumes listed and their
status, which otherwise appear at the beginning and end of the output when
the output includes more than one volume.
.IP "\fB\-nosort\fR" 4
.IX Item "-nosort"
Suppresses the default sorting of volume entries alphabetically by volume
name.
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity \f(CW\*(C`anonymous\*(C'\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
\&\fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the command so that the operation's results are not transmitted
across the network in clear text. This option is available in OpenAFS
versions 1.4.11 or later and 1.5.60 or later.
.IP "\fB\-noresolve\fR" 4
.IX Item "-noresolve"
Shows all servers as \s-1IP\s0 addresses instead of the \s-1DNS\s0 name. This is very
useful when the server address is registered as 127.0.0.1 or when dealing
with multi-homed servers. This option is available in OpenAFS
versions 1.4.8 or later and 1.5.35 or later.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
If the output includes more than one \s-1VLDB\s0 entry, by default the first line
reports which file server machine, partition, or both, houses the
volumes. The final line of output reports the total number of entries
displayed. Including the \fB\-quiet\fR flag suppresses these lines.
.PP
By default, volumes are sorted alphabetically by volume name.  Including
the \fB\-nosort\fR flag skips the sorting step, which can speed up the
production of output if there are a large number of entries.
.PP
The \s-1VLDB\s0 entry for each volume includes the following information:
.IP "\(bu" 4
The base (read/write) volume name. The read-only and backup versions have
the same name with a \f(CW\*(C`.readonly\*(C'\fR and \f(CW\*(C`.backup\*(C'\fR extension, respectively.
.IP "\(bu" 4
The volume \s-1ID\s0 numbers allocated to the versions of the volume that
actually exist, in fields labeled \f(CW\*(C`RWrite\*(C'\fR for the read/write, \f(CW\*(C`ROnly\*(C'\fR
for the read-only, \f(CW\*(C`Backup\*(C'\fR for the backup, and \f(CW\*(C`RClone\*(C'\fR for the
ReleaseClone. (If a field does not appear, the corresponding version of
the volume does not exist.) The appearance of the \f(CW\*(C`RClone\*(C'\fR field normally
indicates that a release operation did not complete successfully; the
\&\f(CW\*(C`Old release\*(C'\fR and \f(CW\*(C`New release\*(C'\fR flags often also appear on one or more
of the site definition lines described just following.
.IP "\(bu" 4
The number of sites that house a read/write or read-only copy of the
volume, following the string \f(CW\*(C`number of sites \->\*(C'\fR.
.IP "\(bu" 4
A line for each site that houses a read/write or read-only copy of the
volume, specifying the file server machine, partition, and type of volume
(\f(CW\*(C`RW\*(C'\fR for read/write or \f(CW\*(C`RO\*(C'\fR for read-only). If a backup version exists,
it is understood to share the read/write site.  Several flags can appear
with a site definition:
.RS 4
.IP "Not released" 4
.IX Item "Not released"
Indicates that the vos release command has not been issued since the \fBvos
addsite\fR command was used to define the read-only site.
.IP "Old release" 4
.IX Item "Old release"
Indicates that a vos release command did not complete successfully,
leaving the previous, obsolete version of the volume at this site.
.IP "New release" 4
.IX Item "New release"
Indicates that a vos release command did not complete successfully, but
that this site did receive the correct new version of the volume.
.RE
.RS 4
.RE
.IP "\(bu" 4
If the \s-1VLDB\s0 entry is locked, the string \f(CW\*(C`Volume is currently LOCKED\*(C'\fR, as
well as (in OpenAFS 1.5.75 and later) one or more of the following strings:
.RS 4
.IP "Volume is locked for a move operation" 4
.IX Item "Volume is locked for a move operation"
Indicates that the volume was locked due to a \fBvos move\fR or a \fBvos
convertROtoRW\fR command.
.IP "Volume is locked for a release operation" 4
.IX Item "Volume is locked for a release operation"
Indicates that the volume was locked due to a \fBvos release\fR command.
.IP "Volume is locked for a backup operation" 4
.IX Item "Volume is locked for a backup operation"
Indicates that the volume was locked due to a \fBvos backup\fR command.
.IP "Volume is locked for a delete/misc operation" 4
.IX Item "Volume is locked for a delete/misc operation"
Indicates that the volume was locked due to a \fBvos delentry\fR, \fBvos
addsite\fR, \fBvos remsite\fR, \fBvos changeloc\fR, \fBvos syncvldb\fR, \fBvos
syncserv\fR, \fBvos rename\fR, or \fBvos lock\fR command.
.IP "Volume is locked for a dump/restore operation" 4
.IX Item "Volume is locked for a dump/restore operation"
Indicates that the volume was locked due to a \fBvos dump\fR or \fBvos restore\fR
command.
.RE
.RS 4
.RE
.PP
For further discussion of the \f(CW\*(C`New release\*(C'\fR and \f(CW\*(C`Old release\*(C'\fR flags, see
\&\fIvos_release\fR\|(1).
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command displays \s-1VLDB\s0 information for the \s-1ABC\s0 Corporation
volume called \f(CW\*(C`usr\*(C'\fR, which has two read-only replication sites:
.PP
.Vb 7
\&   % vos listvldb \-name usr
\&   usr
\&    RWrite: 5360870981   ROnly: 536870982   Backup: 536870983
\&    number of sites \-> 3
\&       server fs1.abc.com partition /vicepa RO Site
\&       server fs3.abc.com partition /vicepa RO Site
\&       server fs2.abc.com partition /vicepb RW Site
.Ve
.PP
The following example shows entries for two of the volumes that reside on
the file server machine \f(CW\*(C`fs4.abc.com\*(C'\fR. The first \s-1VLDB\s0 entry is currently
locked. There are 508 entries that mention the machine as a volume site.
.PP
.Vb 10
\&   % vos listvldb \-server fs4.abc.com
\&   VLDB entries for server fs4.abc.com
\&       .       .           .        .
\&       .       .           .        .
\&   user.smith
\&    RWrite: 278541326   ROnly: 278541327   Backup: 278542328
\&    number of sites \-> 1
\&      server fs4.abc.com partition /vicepg RW Site
\&    Volume is currently LOCKED
\&      user.terry
\&    RWrite 354287190   ROnly 354287191   Backup 354287192
\&    number of sites \-> 1
\&      server fs4.abc.com partition /vicepc RW Site
\&      .       .           .        .
\&      .       .           .        .
\&   Total entries: 508
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
None
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIvos\fR\|(1),
\&\fIvos_examine\fR\|(1),
\&\fIvos_listvol\fR\|(1),
\&\fIvos_lock\fR\|(1),
\&\fIvos_unlock\fR\|(1),
\&\fIvos_unlockvldb\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
