.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "UP 1"
.TH UP 1 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
up \- Recursively copy directories, preserving AFS metadata
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBup\fR [\fB\-v\fR] [\fB\-1\fR] [\fB\-f\fR] [\fB\-r\fR] [\fB\-x\fR] [\fB\-m\fR]
    <\fIsource directory\fR> <\fIdestination directory\fR>
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBup\fR command recursively copies the files and subdirectories in a
specified source directory to a specified destination directory.  The
command interpreter changes the destination directory and the files and
subdirectories in it in the following ways:
.IP "\(bu" 4
It copies the source directory's access control list (\s-1ACL\s0) to the
destination directory and its subdirectories, overwriting any existing
ACLs.
.IP "\(bu" 4
If the issuer is logged on as the local superuser root and has \s-1AFS\s0 tokens
as a member of the group system:administrators, then the source
directory's owner (as reported by the \f(CW\*(C`ls \-ld\*(C'\fR command) becomes the owner
of the destination directory and all files and subdirectories in
it. Otherwise, the issuer's user name is recorded as the owner.
.IP "\(bu" 4
If a file or directory exists in both the source and destination
directories, the source version overwrites the destination version. The
overwrite operation fails if the first (user) \f(CW\*(C`w\*(C'\fR (write) mode bit is
turned off on the version in the destination directory, unless the \fB\-f\fR
flag is provided.
.IP "\(bu" 4
The modification timestamp on a file (as displayed by the \f(CW\*(C`ls \-l\*(C'\fR
command) in the source directory overwrites the timestamp on a file of the
same name in the destination directory, but the timestamp on an existing
subdirectory in the destination directory remains unchanged. If the
command creates a new subdirectory in the destination directory, the new
subdirectory's timestamp is set to the time of the copy operation, rather
than to the timestamp that the subdirectory has in the source directory.
.PP
The up command is idempotent, meaning that if its execution is interrupted
by a network, server machine, or process outage, then a subsequent reissue
of the same command continues from the interruption point, rather than
starting over at the beginning. This saves time and reduces network
traffic in comparison to the \s-1UNIX\s0 commands that provide similar
functionality.
.PP
The \fBup\fR command returns a status code of \f(CW0\fR (zero) only if it
succeeds. Otherwise, it returns a status code of \f(CW1\fR (one).
.PP
This command does not use the syntax conventions of the \s-1AFS\s0 command
suites. Provide the command name and all option names in full.
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-v\fR" 4
.IX Item "-v"
Prints a detailed trace to the standard output stream as the command runs.
.IP "\fB\-1\fR" 4
.IX Item "-1"
Copies only the files in the top level source directory to the destination
directory, rather than copying recursively through subdirectories. The
source directory's \s-1ACL\s0 still overwrites the destination directory's. (This
is the number one, not the letter \f(CW\*(C`l\*(C'\fR.)
.IP "\fB\-f\fR" 4
.IX Item "-f"
Overwrites existing directories, subdirectories, and files even if the
first (user) \f(CW\*(C`w\*(C'\fR (write) mode bit is turned off on the version in the
destination directory.
.IP "\fB\-m\fR" 4
.IX Item "-m"
Recognize and copy mount points rather than traversing the volumes they
reference during the recursive copy operation.  Without \fB\-m\fR, \fBup\fR's
default behavior is to copy the contents of all volumes and subvolumes
mounted under the source directory into the volume containing the
destination directory.
.IP "\fB\-r\fR" 4
.IX Item "-r"
Creates a backup copy of all files overwritten in the destination
directory and its subdirectories, by adding a \f(CW\*(C`.old\*(C'\fR extension to each
filename.
.IP "\fB\-x\fR" 4
.IX Item "-x"
Sets the modification timestamp on each file to the time of the copying
operation.
.IP "\fIsource directory\fR" 4
.IX Item "source directory"
Names the directory to copy recursively.
.IP "\fIdestination directory\fR" 4
.IX Item "destination directory"
Names the directory to which to copy. It does not have to exist already.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following command copies the contents of the directory \fIdir1\fR to
directory \fIdir2\fR:
.PP
.Vb 1
\&   % up dir1 dir2
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must have the \f(CW\*(C`a\*(C'\fR (administer) permission on the \s-1ACL\s0 of both
the source and destination directories.
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
