.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_COPY 1"
.TH VOS_COPY 1 "2011-07-19" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_copy \- Make a copy of a volume
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos copy\fR [\fB\-id\fR]\ <\fIvolume\ name\ or\ \s-1ID\s0\ of\ source\fR>
   [\fB\-fromserver\fR]\ <\fImachine\ name\ for\ source\fR>
   [\fB\-frompartition\fR]\ <\fIpartition\ name\ for\ source\fR>
   [\fB\-toname\fR]\ <\fIvolume\ name\ for\ new\ copy\fR>
   [\fB\-toserver\fR]\ <\fImachine\ name\ for\ destination\fR>
   [\fB\-topartition\fR]\ <\fIpartition\ name\ for\ destination\fR>
   [\fB\-offline\fR] [\fB\-readonly\fR] [\fB\-live\fR] [\fB\-cell\fR\ <\fIcell\ name\fR>]
   [\fB\-noauth\fR] [\fB\-localauth\fR] [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-noresolve\fR]
   [\fB\-help\fR]
.PP
\&\fBvos cop\fR [\fB\-i\fR]\ <\fIvolume\ name\ or\ \s-1ID\s0\ of\ source\fR>
   [\fB\-froms\fR]\ <\fImachine\ name\ for\ source\fR>
   [\fB\-fromp\fR]\ <\fIpartition\ name\ for\ source\fR>
   [\fB\-ton\fR]\ <\fIvolume\ name\ for\ new\ copy\fR>
   [\fB\-tos\fR]\ <\fImachine\ name\ for\ destination\fR>
   [\fB\-top\fR]\ <\fIpartition\ name\ for\ destination\fR>
   [\fB\-o\fR] [\fB\-r\fR] [\fB\-li\fR] [\fB\-c\fR\ <\fIcell\ name\fR>]
   [\fB\-noa\fR] [\fB\-lo\fR] [\fB\-v\fR] [\fB\-e\fR] [\fB\-nor\fR]
   [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos copy\fR command makes a copy of a volume with a new name.  It is
equivalent to \fBvos dump\fR followed by \fBvos restore\fR, but doesn't require
the volume be stored locally by the client.
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Currently, the maximum size of a volume is 2 terabytes (2^31 bytes).
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "[\fB\-id\fR] <\fIvolume name or \s-1ID\s0\fR>" 4
.IX Item "[-id] <volume name or ID>"
Specifies either the complete name or volume \s-1ID\s0 number of a read/write
volume.
.IP "[\fB\-fromserver\fR] <\fImachine name for source\fR>" 4
.IX Item "[-fromserver] <machine name for source>"
Identifies the file server machine where the source volume resides. Provide
the machine's \s-1IP\s0 address or its host name (either fully qualified or using
an unambiguous abbreviation). For details, see \fIvos\fR\|(1).
.IP "[\fB\-frompartition\fR] <\fIpartition name for source\fR>" 4
.IX Item "[-frompartition] <partition name for source>"
Names the partition where the source volume resides. Provide the full
partition name (for, example, \fB/vicepa\fR) or one of the abbreviated forms
described in \fIvos\fR\|(1).
.IP "[\fB\-toname\fR] <\fIvolume name for new copy\fR>" 4
.IX Item "[-toname] <volume name for new copy>"
The complete name of the new volume to create.
.IP "[\fB\-toserver\fR] <\fImachine name for destination\fR>" 4
.IX Item "[-toserver] <machine name for destination>"
Identifies the file server machine to which to copy the volume.  Provide
the machine's \s-1IP\s0 address or its host name (either fully qualified or using
an unambiguous abbreviation). For details, see \fIvos\fR\|(1).
.IP "[\fB\-topartition\fR] <\fIpartition name for destination\fR>" 4
.IX Item "[-topartition] <partition name for destination>"
Names the partition to which to copy the volume. Provide the full partition
name (for, example, \fB/vicepa\fR) or one of the abbreviated forms described in
\&\fIvos\fR\|(1).
.IP "\fB\-offline\fR" 4
.IX Item "-offline"
Leaves the new volume flagged as off-line in the volume database.
.IP "\fB\-readonly\fR" 4
.IX Item "-readonly"
Flags the new volume as read-only in the volume database.
.IP "\fB\-live\fR" 4
.IX Item "-live"
Copies the live volume without cloning.  This is normally not necessary and
causes the volume to be kept locked for longer than the normal copy
mechanism.
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity \f(CW\*(C`anonymous\*(C'\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
\&\fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the command so that the operation's results are not transmitted
across the network in clear text. This option is available in OpenAFS
versions 1.4.11 or later and 1.5.60 or later.
.IP "\fB\-noresolve\fR" 4
.IX Item "-noresolve"
Shows all servers as \s-1IP\s0 addresses instead of the \s-1DNS\s0 name. This is very
useful when the server address is registered as 127.0.0.1 or when dealing
with multi-homed servers. This option is available in OpenAFS
versions 1.4.8 or later and 1.5.35 or later.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "OUTPUT"
.IX Header "OUTPUT"
This command has no output unless \f(CW\*(C`\-verbose\*(C'\fR is specified or there is
an error.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example makes a verbose copy of the \f(CW\*(C`test\*(C'\fR volume named
\&\f(CW\*(C`test2\*(C'\fR in the cell \f(CW\*(C`localcell\*(C'\fR. The volume and copy both reside on
\&\f(CW\*(C`/vicepa\*(C'\fR of \f(CW\*(C`server1\*(C'\fR.
.PP
.Vb 10
\&   % vos copy test server1  a test2 server1 a \-cell localcell \-verbose
\&   Starting transaction on source volume 536870921 ... done
\&   Allocating new volume id for clone of volume 536870921 ... done
\&   Allocating new volume id for copy of volume 536870921 ... done
\&   Cloning source volume 536870921 ... done
\&   Ending the transaction on the source volume 536870921 ... done
\&   Starting transaction on the cloned volume 536870926 ... done
\&   Setting flags on cloned volume 536870926 ... done
\&   Getting status of cloned volume 536870926 ... done
\&   Creating the destination volume 536870927 ... done
\&   Setting volume flags on destination volume 536870927 ... done
\&   Dumping from clone 536870926 on source to volume 536870927 on destination ... done
\&   Ending transaction on cloned volume 536870926 ... done
\&   Starting transaction on source volume 536870921 ... done
\&   Doing the incremental dump from source to destination for volume 536870921 ...  done
\&   Setting volume flags on destination volume 536870927 ... done
\&   Ending transaction on destination volume 536870927 ... done
\&   Ending transaction on source volume 536870921 ... done
\&   Starting transaction on the cloned volume 536870926 ... done
\&   Deleting the cloned volume 536870926 ... done
\&   Ending transaction on cloned volume 536870926 ... done
\&   Created the VLDB entry for the volume test2 536870927
\&   Volume 536870921 copied from server1 /vicepa to test2 on server1 /vicepa
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the
machine specified with the \fB\-server\fR argument and on each database server
machine. If the \fB\-localauth\fR flag is included, the issuer must instead be
logged on to a server machine as the local superuser \f(CW\*(C`root\*(C'\fR.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIvos\fR\|(1),
\&\fIvos_clone\fR\|(1),
\&\fIvos_move\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
Copyright 2007 Jason Edgecombe <jason@rampaginggeek.com>
.PP
This documentation is covered by the \s-1BSD\s0 License as written in the
doc/LICENSE file. This man page was written by Jason Edgecombe for
OpenAFS.
