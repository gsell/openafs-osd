.\" Automatically generated by Pod::Man 2.16 (Pod::Simple 3.05)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sh \" Subsection heading
.br
.if t .Sp
.ne 5
.PP
\fB\\$1\fR
.PP
..
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.Sh), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "VOS_MOVE 1"
.TH VOS_MOVE 1 "2010-12-15" "OpenAFS" "AFS Command Reference"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
vos_move \- Moves a read/write volume to another site
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBvos move\fR \fB\-id\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
    \fB\-fromserver\fR\ <\fImachine\ name\ on\ source\fR>
    \fB\-frompartition\fR\ <\fIpartition\ name\ on\ source\fR>
    \fB\-toserver\fR\ <\fImachine\ name\ on\ destination\fR>
    \fB\-topartition\fR\ <\fIpartition\ name\ on\ destination\fR>
    [\fB\-live\fR] [\fB\-cell\fR\ <\fIcell\ name\fR>] [\fB\-noauth\fR] [\fB\-localauth\fR]
    [\fB\-verbose\fR] [\fB\-encrypt\fR] [\fB\-noresolve\fR] [\fB\-help\fR]
.PP
\&\fBvos m\fR \fB\-i\fR\ <\fIvolume\ name\ or\ \s-1ID\s0\fR>
    \fB\-froms\fR\ <\fImachine\ name\ on\ source\fR>
    \fB\-fromp\fR\ <\fIpartition\ name\ on\ source\fR>
    \fB\-tos\fR\ <\fImachine\ name\ on\ destination\fR>
    \fB\-top\fR\ <\fIpartition\ name\ on\ destination\fR>
    [\fB\-li\fR] [\fB\-c\fR\ <\fIcell\ name\fR>] [\fB\-noa\fR]
    [\fB\-lo\fR] [\fB\-v\fR] [\fB\-e\fR] [\fB\-nor\fR] [\fB\-h\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
The \fBvos move\fR command moves the indicated read/write volume from its
current site (specified with the \fB\-fromserver\fR and \fB\-frompartition\fR
arguments) to the destination site (specified with the \fB\-toserver\fR and
\&\fB\-topartition\fR arguments). This command automatically removes the backup
copy from the current site, if it exists. To create a new backup volume at
the destination site, use the \fBvos backup\fR command.
.PP
This command works on read/write volumes only. To move a read-only volume,
use the \fBvos addsite\fR and \fBvos release\fR commands to define a new
read-only site and release the volume contents to it, and then use the
\&\fBvos remove\fR command to remove the previous read-only volume's definition
from the Volume Location Database (\s-1VLDB\s0) and data from the partition. To
move a backup volume, use this command to move its read/write source and
then issue the \fBvos backup\fR command.
.PP
Before executing this command, the \fBvos\fR command interpreter initiates a
check that the destination partition contains enough space to house the
volume being moved. If there is not enough space, the move operation is
not attempted and the following message appears:
.PP
.Vb 1
\&   vos: no space on target partition <dest_part> to move volume <volume>
.Ve
.SH "CAUTIONS"
.IX Header "CAUTIONS"
Unless there is a compelling reason, do not interrupt a \fBvos move\fR
command in progress. Interrupting a move can result in one or more of the
following inconsistent states:
.IP "\(bu" 4
There are two versions of the volume, one at the source site and one at
the destination site. (If this happens, retain the version identified by
the \s-1VLDB\s0 and use the \fBvos zap\fR command to remove the other version.)
.IP "\(bu" 4
The backup version of the volume is stranded at the old site. (If this
happens, use the \fBvos zap\fR command to remove it.)
.IP "\(bu" 4
The volume is off-line. (If this happens, run the \fBbos salvage\fR command
to bring it back on line.)
.PP
If the Ctrl-C interrupt signal is pressed while a vos move operation is
executing, the following message warns of the consequences and requests
confirmation of the kill signal:
.PP
.Vb 3
\&   SIGINT handler: vos move operation in progress
\&   WARNING: may leave AFS storage and metadata in indeterminate state
\&   enter second control\-c to exit
.Ve
.PP
To confirm termination of the operation, press Ctrl-C a second time; press
any other key to continue the operation.
.PP
Currently, the maximum size of a volume is 2 terabytes (2^31 bytes).
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-id\fR <\fIvolume name or \s-1ID\s0\fR>" 4
.IX Item "-id <volume name or ID>"
Specifies either the complete name or volume \s-1ID\s0 number of a read/write
volume.
.IP "\fB\-fromserver\fR <\fIserver name\fR>" 4
.IX Item "-fromserver <server name>"
Identifies the file server machine where the volume currently
resides. Provide the machine's \s-1IP\s0 address or its host name (either fully
qualified or using an unambiguous abbreviation). For details, see
\&\fIvos\fR\|(1).
.IP "\fB\-frompartition\fR <\fIpartition name\fR>" 4
.IX Item "-frompartition <partition name>"
Names the partition where the volume currently resides. Provide the full
partition name (for, example, \fB/vicepa\fR) or one of the abbreviated forms
described in \fIvos\fR\|(1).
.IP "\fB\-toserver\fR <\fIserver name\fR>" 4
.IX Item "-toserver <server name>"
Identifies the file server machine to which to move the volume.  Provide
the machine's \s-1IP\s0 address or its host name (either fully qualified or using
an unambiguous abbreviation). For details, see \fIvos\fR\|(1).
.IP "\fB\-topartition\fR <\fIpartition name\fR>" 4
.IX Item "-topartition <partition name>"
Names the partition to which to move the volume. Provide the full
partition name (for, example, \fB/vicepa\fR) or one of the abbreviated forms
described in \fIvos\fR\|(1).
.IP "\fB\-live\fR" 4
.IX Item "-live"
Avoids making a temporary copy of the volume during the move. This is
useful if the partition is full, but the administrator needs to move
volumes to a another partition or server to free up disk space. The
caveat is that the volume is locked during the entire operation
instead of the short time that is needed to make the temporary clone.
.IP "\fB\-cell\fR <\fIcell name\fR>" 4
.IX Item "-cell <cell name>"
Names the cell in which to run the command. Do not combine this argument
with the \fB\-localauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-noauth\fR" 4
.IX Item "-noauth"
Assigns the unprivileged identity \f(CW\*(C`anonymous\*(C'\fR to the issuer. Do not
combine this flag with the \fB\-localauth\fR flag. For more details, see
\&\fIvos\fR\|(1).
.IP "\fB\-localauth\fR" 4
.IX Item "-localauth"
Constructs a server ticket using a key from the local
\&\fI/usr/afs/etc/KeyFile\fR file. The \fBvos\fR command interpreter presents it
to the Volume Server and Volume Location Server during mutual
authentication. Do not combine this flag with the \fB\-cell\fR argument or
\&\fB\-noauth\fR flag. For more details, see \fIvos\fR\|(1).
.IP "\fB\-verbose\fR" 4
.IX Item "-verbose"
Produces on the standard output stream a detailed trace of the command's
execution. If this argument is omitted, only warnings and error messages
appear.
.IP "\fB\-encrypt\fR" 4
.IX Item "-encrypt"
Encrypts the command so that the operation's results are not transmitted
across the network in clear text. This option is available in OpenAFS
versions 1.4.11 or later and 1.5.60 or later.
.IP "\fB\-noresolve\fR" 4
.IX Item "-noresolve"
Shows all servers as \s-1IP\s0 addresses instead of the \s-1DNS\s0 name. This is very
useful when the server address is registered as 127.0.0.1 or when dealing
with multi-homed servers. This option is available in OpenAFS
versions 1.4.8 or later and 1.5.35 or later.
.IP "\fB\-help\fR" 4
.IX Item "-help"
Prints the online help for this command. All other valid options are
ignored.
.SH "EXAMPLES"
.IX Header "EXAMPLES"
The following example moves the volume \f(CW\*(C`user.smith\*(C'\fR from the \fI/vicepb\fR
partition on the file server machine \f(CW\*(C`fs3.abc.com\*(C'\fR to the \fI/vicepg\fR
partition on the file server machine \f(CW\*(C`fs7.abc.com\*(C'\fR.
.PP
.Vb 2
\&   % vos move \-id user.smith \-fromserver fs3.abc.com \-frompartition b \e
\&       \-toserver fs7.abc.com \-topartition g
.Ve
.SH "PRIVILEGE REQUIRED"
.IX Header "PRIVILEGE REQUIRED"
The issuer must be listed in the \fI/usr/afs/etc/UserList\fR file on the
machines specified with the \fB\-toserver\fR and \fB\-fromserver\fR arguments and
on each database server machine.  If the \fB\-localauth\fR flag is included,
the issuer must instead be logged on to a server machine as the local
superuser \f(CW\*(C`root\*(C'\fR.
.SH "SEE ALSO"
.IX Header "SEE ALSO"
\&\fIvos\fR\|(1),
\&\fIvos_addsite\fR\|(1),
\&\fIvos_backup\fR\|(1),
\&\fIvos_copy\fR\|(1),
\&\fIvos_release\fR\|(1),
\&\fIvos_listvol\fR\|(1),
\&\fIvos_remove\fR\|(1)
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
\&\s-1IBM\s0 Corporation 2000. <http://www.ibm.com/> All Rights Reserved.
.PP
This documentation is covered by the \s-1IBM\s0 Public License Version 1.0.  It was
converted from \s-1HTML\s0 to \s-1POD\s0 by software written by Chas Williams and Russ
Allbery, based on work by Alf Wachsmann and Elizabeth Cassell.
